<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<script src="/jquery.js" type="text/javascript"></script>
        <link rel="stylesheet" href="/style.css">
        <title>iOS File Manager</title>
    </head>
    <body bgcolor="#FFFFFF">
        
        <div id="container">
            <h1>
                Your Files:
            </h1>
            
            <section id="path-navigation" class="page-header-text">
                <a href="/" data-fq_path="" dropzone="copy move" class="crumb">Home</a>
                %%NAVIGATION%%
            </section>
            
            <section id="global-actions-bar">
                <form action="" enctype="multipart/form-data" method="post" class='upload'>
                    <div style="height:0px;overflow:hidden">
                    <input type="file" id="fileInput" name="fileInput" />
                    </div>
                    <button type="button" class='btn' onclick="chooseFile();">choose file</button>
                    <input id="upload_file" class='btn' type="submit" value="Upload" />
                </form>
            </section>            
            
            <section id="file_grid">
            </section>

        </div>
        
		<script type="text/javascript" charset="utf-8">
            function chooseFile() {
                $("#fileInput").click();
            }
        
            var now = new Date();
            $.getJSON("/listfile%%FILE_PATH%%?" + now.toString(),
                      function(data){
                      $.each(data, function(i,item){
                             encodeName = encodeURI(item.name).replace("'", "&apos;");
                             var div = $('<div/>').attr("class","file_block").appendTo("#file_grid");
                             $('<img/>').attr("src","/images/fileicon.png").appendTo(div);
                             $("<div class='file_name'>" +
                               "<a href='/files%%FILE_PATH%%/" + item.name + "'>" + item.name + "</a>" +
                               "</div>").appendTo(div);
                             });
                      });
        </script>
        
    </body>
</html>